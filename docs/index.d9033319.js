class t{constructor(t,e,i,c,r,n,o){this.title=t,this.images=e,this.stock=i,this.price=c,this.discountPercentage=r,this.category=n,this.rating=o}displayInfo(){console.table({Name:this.title,Images:this.images.join(", "),Stock:this.stock,Price:`$${this.price}`,Discount:`${this.discountPercentage}%`,Category:this.category,Rating:this.rating})}discountedPrice(){return Math.round(this.price*(1-this.discountPercentage/100)*100)/100}updateStock(){this.stock>0&&this.stock--}productCard(){let t=document.createElement("div");t.classList.add("card");let e=document.createElement("h3");e.innerText=this.title;let i=document.createElement("img");i.src=this.images[0],i.alt=`Image of ${this.title}`;let c=document.createElement("p");c.innerHTML=`<b>Stock: ${this.stock}</b>`;let r=document.createElement("p");r.innerHTML=`<i>Price: $${this.discountedPrice()}</i>`;let n=document.createElement("button");return n.innerText="Add to Cart",n.addEventListener("click",()=>{this.updateStock(),c.innerHTML=`<b>Stock: ${this.stock}</b>`}),t.append(e,i,c,r,n),t}}async function e(){try{let e=await fetch("https://dummyjson.com/products");if(!e.ok)throw Error("Failed to fetch products");return(await e.json()).products.map(e=>new t(e.title,e.images,e.stock,e.price,e.discountPercentage,e.category,e.rating))}catch(t){throw console.error("Error fetching products:",t),Error("Could not fetch products. Please try again later.")}}const i=(t,e)=>"All"===e||"Select category"===e?t:t.filter(t=>t.category===e),c=(t,e)=>"Select price"===e?t:t.filter(t=>{let i=t.discountedPrice();return"< $50"===e?i<50:i>50}),r=(t,e="lowToHighPrice")=>[...t].sort((t,i)=>"lowToHighPrice"===e?t.discountedPrice()-i.discountedPrice():i.discountedPrice()-t.discountedPrice()),n=(t,e="lowToHighRating")=>[...t].sort((t,i)=>"lowToHighRating"===e?t.rating-i.rating:i.rating-t.rating);async function o(){try{let t=await e();a(t)}catch(t){console.error("Error fetching products:",t)}}function a(t){let e=document.getElementById("productContainer");e.innerHTML="",t.forEach(t=>{t.displayInfo();let i=t.productCard();e.appendChild(i)})}e().then(t=>{(function(t){let e=document.getElementById("categoryFilter"),o=document.getElementById("priceFilter"),s=document.getElementById("priceHighLowSort"),d=document.getElementById("ratingHighLowSort");e.addEventListener("change",()=>{let r=e.value,n=o.value,s=i(t,r);a(s=c(s,n))}),o.addEventListener("change",()=>{let l=e.value,u=o.value,h=s.value,g=d.value,m=i(t,l);m=c(m,u),h?m=r(m,h):g&&(m=n(m,g)),a(m)}),s.addEventListener("change",()=>{let n=s.value,d=e.value,l=o.value,u=i(t,d);a(u=r(u=c(u,l),n))}),d.addEventListener("change",()=>{let r=d.value,s=e.value,l=o.value,u=i(t,s);a(u=n(u=c(u,l),r))})})(t),a(t)}),o();
//# sourceMappingURL=index.d9033319.js.map
